<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Leap – Einstellungen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- ✅ Bestehende Styles -->
    <link rel="stylesheet" href="../css/whoarewe.css" />
    <link rel="stylesheet" href="../css/index.css" />
    <link rel="stylesheet" href="../css/settings.css" />

    <!-- ✅ Firebase & Scripts -->
    <script type="module" src="../js/firebaseauth.js" defer></script>
    <script src="../js/loginFormularDiv.js" defer></script>
    <script src="../js/openLogin.js" defer></script>
    <script src="../js/whoareweAnimation.js" defer></script>
    <script src="../js/particlesMenu.js" defer></script>
    <script src="../js/appearance-apply.js" defer></script>

    <!-- ✅ Settings Logik -->
    <script type="module" src="../js/settingsNicknameShower.js" defer></script>
    <script type="module" src="../js/settingsAvatarPicker.js" defer></script>
    <script type="module" src="../js/settingsAchievementsPicker.js" defer></script>
    <script type="module" src="../js/settingsEditUsername.js" defer></script>

    <!-- ✅ NEU: Appearance-Settings -->
    <script type="module" src="../js/settingsAppearance.js" defer></script>
  </head>

  <body>
    <div class="hauptMenu">
      <canvas id="particleCanvas"></canvas>
      <div class="backToMainLogo">
        <a href="index.html">
          <img src="../assets/images/Leap.png" alt="Leap Logo" />
        </a>
      </div>
    </div>

    <!-- ===== LOGIN / USER ===== -->
    <div class="loginDiv">
      <div class="loginButton" id="loginButton">Login</div>
      <div class="registerButton" id="registerButton">Register</div>

      <div class="loginFormularDiv">
        <form class="loginForm" id="loginForm">
          <label for="logUsername">Benutzername:</label>
          <input type="text" id="logUsername" name="username" required />
          <label for="logPassword">Passwort:</label>
          <input type="password" id="logPassword" required />
          <button type="submit" class="submitButton" id="submitbuttonlogin">Anmelden</button>
          <div id="signInMessage" class="alert"></div>
        </form>
      </div>

      <div class="registerFormularDiv">
        <form class="registerForm" id="registerForm">
          <label for="regUsername">Benutzername:</label>
          <input type="text" id="regUsername" name="username" required />
          <label for="regEmail">Email:</label>
          <input type="email" id="regEmail" name="email" required />
          <label for="regPassword">Passwort:</label>
          <input type="password" id="regPassword" required />
          <button type="submit" class="submitButton" id="submitbuttonregister">Registrieren</button>
        </form>
      </div>
    </div>

    <div class="userinfo">
      <div class="character" id="avatarLink"></div>
      <div class="welcomeNote">Willkommen</div>
      <div class="CharacterName"></div>
      <div id="submitlogout" class="logoutButton" style="display:none;">⎋ Logout</div>
    </div>

    <!-- ===== PROFIL HEADER ===== -->
    <div id="topPage">
      <div id="picture"></div>

      <div id="NicknameShower">
        <p class="nickname">Willkommen, <span class="usernameDisplay"></span>!</p>
        <div class="underline"></div>
        <p class="memberSince">Member seit: <span id="memberSince"></span></p>

        <div class="achievements-wrapper">
          <p class="achievements-title">Achievements</p>
          <div class="achievements-section">
            <div class="achievements">
              <img src="../assets/images/achivments_placeholder.png" class="badge" />
              <img src="../assets/images/achivments_placeholder.png" class="badge" />
              <img src="../assets/images/achivments_placeholder.png" class="badge" />
            </div>
            <button id="manageAchievements">⚙️</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== MAIN ===== -->
    <div class="main">
      <div class="nicknameshower">
        <span class="usernameDisplay">DeinName</span>
        <button class="edit-username-btn">✏️ Bearbeiten</button>
      </div>

      <!-- ✅ Modal zum Bearbeiten -->
      <div id="edit-username-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
          <h2>Benutzernamen bearbeiten</h2>
          <input type="text" id="new-username" placeholder="Neuer Benutzername" />
          <div class="modal-actions">
            <button id="save-username">Speichern</button>
            <button id="cancel-username">Abbrechen</button>
          </div>
        </div>
      </div>

      <!-- ========== APPEARANCE SETTINGS ========== -->
      <section class="appearance-card" aria-labelledby="appearanceTitle">
        <h2 id="appearanceTitle">Aussehen</h2>

        <div class="row">
          <label for="nameColor">Namensfarbe</label>
          <input type="color" id="nameColor" value="#50e9ba" />
        </div>

        <div class="row">
          <label for="borderGradient">Rahmenfarbe</label>
          <input type="color" id="borderGradient" value="#148fac" />
        </div>

        <div class="row">
          <label for="particleColor">Partikel-Farbe</label>
          <input type="color" id="particleColor" value="#00e3b6" />
        </div>

        <div class="row">
          <label for="backgroundSelect">Hintergrund</label>
          <select id="backgroundSelect">
            <option value="dark">Dunkel</option>
            <option value="light">Hell</option>
            <option value="gradient">Gradient (grau)</option>
            <option value="stars">Sterne</option>
          </select>
        </div>

        <div class="row switch">
          <label for="enableGlow">Glüh-Effekt aktiv</label>
          <input type="checkbox" id="enableGlow" checked />
        </div>

        <div class="hint">Änderungen werden automatisch gespeichert ✨</div>
      </section>
    </div>
  </body>
</html>